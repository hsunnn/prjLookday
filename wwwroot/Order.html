<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>訂單資料</title>
</head>
<body>
    <h1>訂單資料</h1>
    <table id="bookingsTable" border="1">
        <thead>
            <tr>
                <th>序號</th>
                <th>訂單編號</th>
                <th>訂單日期</th>
                <th>價錢</th>
                <th>客戶編號</th>
                <th>客戶姓名</th>
                <th>活動編號</th>
                <th>活動名稱</th>
                <th>訂單狀態</th>
                <th>總參與人數</th>
            </tr>
        </thead>
        <tbody>
            <!-- 添加JavaScript的資料 -->
        </tbody>
    </table>

    <script>
        async function loadBookings() {
            const response = await fetch('/api/BookingOrder'); // Adjust the URL to match your endpoint
            const data = await response.json();

            //getElementsByTagName會將 < tbody > 裡面的內容，丟進 tableBody 變數當中
            const tableBody = document.getElementById('bookingsTable').getElementsByTagName('tbody')[0];
            tableBody.innerHTML = ''; // 清空原先資料



            data.forEach((data, index) => {
                const row = tableBody.insertRow();
                row.insertCell(0).innerHTML = index + 1;
                row.insertCell(1).innerText = data.bookingId;
                row.insertCell(2).innerText = new Date(data.bookingDate).toLocaleDateString(); //用于将日期对象转换为特定语言格式的日期字符串。它可以根据本地语言环境（Locale）来格式化日期，提供了一种简便的方法来显示用户友好的日期格式。
                row.insertCell(3).innerText = data.price;
                row.insertCell(4).innerText = data.userID;
                row.insertCell(5).innerText = data.userName;
                row.insertCell(6).innerText = data.activityID;
                row.insertCell(7).innerText = data.activityName;
                row.insertCell(8).innerText = data.bookingStatus;
                row.insertCell(9).innerText = data.member;
            });
        }

        // 一載入頁面 就顯示資料
        window.onload = loadBookings;
    </script>
</body>
</html>
